/*! progressbar 2017-01-22 */
function loadJSON(a){var b=new XMLHttpRequest;b.overrideMimeType("application/json"),b.open("GET","http://pb-api.herokuapp.com/bars",!0),b.onreadystatechange=function(){if(4==b.readyState&&"200"==b.status)return a(b.responseText)},b.send(null)}function updateProgressBar(){var a,b=document.getElementsByClassName("progress-wrap");for(a=0;a<b.length;a++){var c=new ProgressBar(b[a]);c.updateProgress()}}var ProgressBar=function(a,b){return this.el=a,this.limit=b,this};ProgressBar.prototype.setValue=function(a){a<0&&(a=0),this.el.setAttribute("data-value",a);var b=parseInt(a/this.limit*100);b=b>100?100:b,this.el.setAttribute("data-percent",b),this.el.lastChild.textContent=a+"/"+this.limit+" ("+b+"%)"},ProgressBar.prototype.getData=function(a){return this.el.getAttribute(a)},ProgressBar.prototype.updateProgress=function(){var a=this.el.getAttribute("data-percent");this.el.firstChild.style.width=a+"%",a>=100?this.el.firstChild.classList.add("red-bar"):this.el.firstChild.classList.remove("red-bar")};var Display=function(){};Display.prototype.buttons=function(a){var b,c=document.createElement("div");for(b=0;b<a.length;b++){var d=document.createElement("button");d.setAttribute("class","progress-button"),d.setAttribute("data-increment",a[b]),d.innerHTML=a[b],c.appendChild(d)}return c},Display.prototype.bars=function(a,b){var c,d=document.createElement("div");for(c=0;c<a.length;c++){var e=document.createElement("div");e.setAttribute("id","progress"+c),e.setAttribute("class","progress-wrap blue-bar"),e.setAttribute("data-value",a[c]);var f=parseInt(a[c]/b*100);f=f>100?100:f,e.setAttribute("data-percent",f);var g=document.createElement("div");g.setAttribute("class","progress-bar progress"),e.appendChild(g),g=document.createElement("div"),g.setAttribute("data-limit",b),g.setAttribute("class","progress-text"),g.innerHTML=a[c]+"/"+b+" ("+f+"%)",e.appendChild(g),d.appendChild(e)}return d},Display.prototype.select=function(a){var b=document.createElement("select");b.setAttribute("id","progress-bar-items"),b.setAttribute("class","col-xl-1 col-lg-1 col-md-2 col-sm-3");var c;for(c=0;c<a.length;c++)b.options[c]=new Option("#progress "+(c+1),"#progress"+c);return b},loadJSON(function(a){var b=JSON.parse(a),c=new Display,d=document.getElementById("progress-bar-container");d.appendChild(c.bars(b.bars,b.limit)),d.appendChild(c.select(b.bars)),d.appendChild(c.buttons(b.buttons)),updateProgressBar();var e,f=document.getElementsByClassName("progress-button");for(e=0;e<f.length;e++)f[e].addEventListener("click",function(a){a.stopImmediatePropagation();var c=parseInt(a.target.getAttribute("data-increment")),d=new ProgressBar(document.querySelector(document.querySelector("#progress-bar-items option:checked").value),b.limit),e=parseInt(d.getData("data-value"))+c;d.setValue(e),d.updateProgress()})}),window.addEventListener("resize",updateProgressBar,!1);